<div class="row d-flex">
  <div class="col-lg-8 col-xs-12 d-flex flex-column">
    <app-cards
      [cards]="allCards$ | async"
      [totalCards]="total$ | async"
      [currentPage]="currentPage$ | async"
      [perPage]="24"
      [filteredParameters]="filters"
    ></app-cards>
  </div>
  <div class="col-lg-4 col-xs-12 filters">
    <label for="heroes">Герой</label>
    <ng-select [items]="heroes$ | async"
               id="heroes"
               bindLabel="name"
               placeholder="Выберите героя"
               bindValue="id"
               [(ngModel)]="filters.heroes">
    </ng-select>
    <label for="races">Раса</label>
    <ng-select [items]="races$ | async"
               id="races"
               bindLabel="name"
               placeholder="Выберите расу"
               bindValue="id"
               [(ngModel)]="filters.race">
    </ng-select>
    <label for="rarity">Редкость</label>
    <ng-select [items]="rarities$ | async"
               id="rarity"
               bindLabel="name"
               placeholder="Выберите редкость"
               bindValue="id"
               [(ngModel)]="filters.rarity">
    </ng-select>
    <label for="rarity">Тип</label>
    <ng-select [items]="types$ | async"
               id="type"
               bindLabel="name"
               placeholder="Выберите тип"
               bindValue="id"
               [(ngModel)]="filters.type">
    </ng-select>
    <label for="mechanic">Механика</label>
    <ng-select [items]="mechanics$ | async"
               id="mechanic"
               bindLabel="name"
               placeholder="Выберите механику"
               bindValue="id"
               [(ngModel)]="filters.mechanic">
    </ng-select>
    <label for="sort">Сортировка</label>
    <ng-select [items]="filters.sortBy.options"
               id="sort"
               bindLabel="label"
               placeholder="Выберите механику"
               bindValue="field"
               [(ngModel)]="filters.sortBy.value">
    </ng-select>

    <div class="filters-property-cards">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="cost" [(ngModel)]="filters.cost.on">
        <label class="form-check-label" for="cost">Включить фильтр по мане</label>
      </div>

      <ng-container *ngIf="filters.cost.on">
        <label for="cost-range" class="form-label">
          Мана ({{ valueOfPropertyCard(filters.cost.value) }})
        </label>
        <input type="range" class="form-range" min="0" max="10" id="cost-range" [(ngModel)]="filters.cost.value">
      </ng-container>

      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="attack" [(ngModel)]="filters.attack.on">
        <label class="form-check-label" for="attack">Включить фильтр по атаке</label>
      </div>

      <ng-container *ngIf="filters.attack.on">
        <label for="attack-range" class="form-label">
          Атака ({{ valueOfPropertyCard(filters.attack.value) }})
        </label>
        <input type="range" class="form-range" min="0" max="10" id="attack-range" [(ngModel)]="filters.attack.value">
      </ng-container>

      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="health" [(ngModel)]="filters.health.on">
        <label class="form-check-label" for="health">Включить фильтр по здоровью</label>
      </div>

      <ng-container *ngIf="filters.health.on">
        <label for="health-range" class="form-label">
          Здоровье ({{ valueOfPropertyCard(filters.health.value) }})
        </label>
        <input type="range" class="form-range" min="0" max="10" id="health-range" [(ngModel)]="filters.health.value">
      </ng-container>
    </div>

    <div class="d-grid gap-2 mt-4">
      <button class="btn btn-primary" type="button" (click)="filteredCards()">Найти</button>
    </div>
  </div>
</div>
